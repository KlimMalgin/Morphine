var Morphine=function(a){return a()}(function(){function a(){}function b(){}function c(a,b){var d=a.shift();return a.length?c(a,b[d]):b[d]}function d(c,d){for(var e=c.split("."),f=this,g=f,h=/^[0-9]$/,i=0;i<e.length&&"undefined"!=typeof f;i++)i==e.length-1?"$"===e[i]?f.push(d):h.test(e[i])?"undefined"==typeof f[e[i]]&&console.error("Элемент %o не существует",e.slice(0,i+1).join(".")):f[e[i]]=d:(h.test(e[i+1])||"$"===e[i+1]?"$"===e[i]?f.push(new a):h.test(e[i])?"undefined"==typeof f[e[i]]&&console.error("Элемент %o не существует",e.slice(0,i+1).join(".")):f[e[i]]="undefined"!=typeof f[e[i]]?f[e[i]]:new a:h.test(e[i])?console.info("undefined"==typeof f[e[i]]?"TODO: Неустоявшееся поведение: Если элемент еще не существует - ничего с ним не делаем, т.к. не ясно что с ним делать":"TODO: Неустоявшееся поведение: Если элемент уже существует - ничего с ним не делаем, т.к. не ясно что с ним делать"):"$"===e[i]?f.push(new b):f[e[i]]="undefined"!=typeof f[e[i]]?f[e[i]]:new b,f="$"===e[i]?f[f.length-1]:f[e[i]]);return g}function e(c,d){for(var g in d)!d.has(g)||d.isUndefined(g)||d.isNull(g)||(f(d[g].constructor)?c[g]=d[g]:(c&&!c.has(g)&&(d[g].isArray()?c[g]=new a:d[g].isObject()&&(c[g]=new b)),e(c[g],d[g])));return c}function f(a,b){b=b?[b]:[Boolean,String,Number];for(var c=b.length,d=0;c>d;d++)if(b[d]===a)return!0;return!1}function g(){}return a.prototype=new Array,b.extend=a.extend=function(a){if(a)for(var b in a)this.prototype[b]=a[b]},g.prototype.has=function(a){return this.hasOwnProperty(a)},g.prototype.isUndefined=function(a){return"undefined"==typeof this[a]},g.prototype.isNull=function(a){return null===this[a]},g.prototype.isObject=function(){return this.constructor===b},g.prototype.isArray=function(){return this.constructor===a},g.prototype.get=function(a){var b=a.split(".");return c(b,this)},g.prototype.add=function(a,b){this[a]=b},g.prototype.remove=function(a){delete this[a]},g.prototype.build=function(a,b){var c=d.bind(this)(a,b);return c},g.prototype.merge=function(a){return e.bind(this)(this,a)},b.extend(g.prototype),a.extend(g.prototype),b});